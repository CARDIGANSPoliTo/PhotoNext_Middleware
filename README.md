
# PhotoNext FBG Project

The _PhotoNext FBG Project_ consists of obtaining and processing the strain and temperature information coming from the Fiber Bragg Gratings (FBG) sensors of an Unmanned Aerial Vehicle (UAV), so that its status can be visualized simply and immediately through a graph and/or a heat-mapped 3D model. It is the result of a joint work of the [Department of Control and Computer Engineering (DAUIN)](https://www.dauin.polito.it/en/) and the [Department of Mechanical and Aerospace Engineering](https://www.dimeas.polito.it/en/(DIMEAS)) of the [Politecnico di Torino](https://www.polito.it/) (Turin, Italy).	

## Components

The _PhotoNext FBG Project_ is currently composed of these programs:

-   [PhotoNext FBG Data Analyzer](https://github.com/CARDIGANSPoliTo/PhotoNext_FBG_Data_Analyzer): the 2D data visualization software, made with Qt. The article related to this software is the following:
    - A. C. Marceddu, A. Aimasso, S. Schiavello, B. Montrucchio, P. Maggiore and M. D. L. Dalla Vedova, "Comprehensive Visualization of Data Generated by Fiber Bragg Grating Sensors," in _IEEE Access_, vol. 11, pp. 121945-121955, 2023, doi: [10.1109/ACCESS.2023.3329425](https://doi.org/10.1109/ACCESS.2023.3329425).

-   [PhotoNext FBG AR Viewer](https://github.com/CARDIGANSPoliTo/PhotoNext_FBG_AR_Viewer): the Augmented Reality (AR) version of the new 3D data visualization software, made with Unity. It is designed to work on Microsoft Hololens 2 or other Mixed Reality Toolkit (MRTK) compatible devices. The articles related to this software are the following:
    - A. C. Marceddu _et al_., "Augmented Reality Visualization of Fiber Bragg Grating Sensor Data for Aerospace Application," _2024 11th International Workshop on Metrology for AeroSpace (MetroAeroSpace)_, Lublin, Poland, 2024, pp. 519-524, doi: [10.1109/MetroAeroSpace61015.2024.10591539](https://doi.org/10.1109/MetroAeroSpace61015.2024.10591539).
    - A. C. Marceddu, A. Aimasso, M. Bertone, P. Maggiore, M. D. L. Dalla Vedova, and B. Montrucchio, "Innovative Monitoring for Aeronautical Application Through Augmented Reality," _Engineering Proceedings_, vol. 90, no. 1(53), 2025, doi: [10.3390/engproc2025090053](https://doi.org/10.3390/engproc2025090053)
    - A. C. Marceddu, A. Aimasso, M. Bertone, B. Montrucchio, P. Maggiore, and M. D. L. D. Vedova, "UAV In-Flight Monitoring Approach Through Interaction Between AR Visualization and Embedded Optical Fiber Sensors," _2025 IEEE 12th International Workshop on Metrology for AeroSpace (MetroAeroSpace)_, Naples, Italy, 2025, pp. 198-203, doi: [10.1109/MetroAeroSpace64938.2025.11114500](https://doi.org/10.1109/MetroAeroSpace64938.2025.11114500).

-   [PhotoNext 3D Viewer](https://github.com/CARDIGANSPoliTo/PhotoNext_3D_Viewer): the desktop version of the 3D data visualization software, made with Unity. The article related to this software is the following:
    - A. C. Marceddu _et al_., "Air-to-Ground Transmission and Near Real-Time Visualization of FBG Sensor Data via Cloud Database," in _IEEE Sensors Journal_, vol. 23, no. 2, pp. 1613-1622, Jan.15, 2023, doi: [10.1109/JSEN.2022.3227463](https://doi.org/10.1109/JSEN.2022.3227463).
    
-  [PhotoNext Middleware](https://github.com/CARDIGANSPoliTo/PhotoNext_Middleware) It allows the visualization software to be connected to the rest of the system through MongoDB or TCP. Currently, it is designed to work only with the [SmartScan Interrogator](https://www.smartfibres.com/products/smartscan).
    
-   [PhotoNext Emulator](https://github.com/CARDIGANSPoliTo/PhotoNext_Emulator): is the emulator of the _Interrogator_. Its configuration can be changed using the configurator. Its usefulness is only for development, as it sends random data. The article related to this software is the following:
    - A. C. Marceddu, A. Aimasso, A. Scaldaferri, P. Maggiore, B. Montrucchio, and M. D. L. Dalla Vedova, "Creation of a Support Software for the Development of a System for Sending and Visualizing FBG Sensor Data for Aerospace Application," _2023 IEEE 10th International Workshop on Metrology for AeroSpace (MetroAeroSpace)_, Milan, Italy, 2023, pp. 487-491, doi: [10.1109/MetroAeroSpace57412.2023.10190008](https://doi.org/10.1109/MetroAeroSpace57412.2023.10190008).
    
-   [PhotoNext Configurator](https://github.com/CARDIGANSPoliTo/PhotoNext_Configurator): a debug instrument, useful to read the data and to send the desired configuration to the _PhotoNext Emulator_ or the _Interrogator_. If applied correctly, it will receive a confirmation message.
    
-   [PhotoNext LibSmartScan](https://github.com/CARDIGANSPoliTo/PhotoNext_LibSmartScan): a library that must be built and installed into the system.
    
-   [PhotoNext LibUtils](https://github.com/CARDIGANSPoliTo/PhotoNext_LibUtils): another library that must be built and installed into the system.


## Installation

The installation flow below involves installing the PhotoNext FBG project on two different systems. Specifically, the _PhotoNext Middleware_ can be a Raspberry Pi 3 or a similar Linux-based system. At the same time, the _Viewers_ can be installed on a Windows desktop, except the _PhotoNext FBG AR Viewer_, which is designed to run on a Microsoft HoloLens 2 or other headsets that support MRTK. This configuration was chosen because, for the purposes of the project, the _PhotoNext Middleware_ runs on a UAV in flight, and the data stream is displayed in near-real time from the ground. Moreover, a [SmartScan Interrogator](https://www.smartfibres.com/products/smartscan) is required to read the data from FBG sensors. The installation systems may vary, but operation may require some minor adjustments. It is recommended to carefully read the articles in the previous section for more information.
    
    
## MongoDB

The project uses a [MongoDB](https://www.mongodb.com/) database as its preferred transmission method for data transmission and reception. Specifically, data exchange occurs via [Change Streams](https://www.mongodb.com/docs/manual/changestreams/). For its working, it is necessary to install OpenSSL and Curl. It is possible to install them by using the following command:

```
sudo apt-get install libssl-dev
sudo apt install curl
```

For more information, please refer to the official [MongoDB website](https://www.mongodb.com/).


## Libraries installation

To work, the _PhotoNext FBG Project_ requires two libraries: _PhotoNext LibUtils_ and _PhotoNext LibSmartScan_. Follow these steps to install them:

1. ensure that there is a seemingly fresh installation of Raspbian (if a Raspberry Pi is being used) or another Linux-based OS;
    
2. create a folder for the project in the preferred location (i.e., _home/pi/Desktop/PhotoNext_);
    
3. open the command line and install Git and CMake with the following commands:

    ```
    sudo apt-get install build-essential
    sudo apt-get install git
    sudo apt-get install cmake
    ```

4. clone the two needed libraries with the following commands:
    
    ```
    git clone git@github.com:CARDIGANSPoliTo/PhotoNext_LibUtils.git
    git clone git@github.com:CARDIGANSPoliTo/PhotoNext_LibSmartScan.git
    ```
    
6. for every library, run the following commands, in the same order written before (first _libutils_, second _libsmartscan_), to create the Makefile and to build and install them:

    ```
    cmake .
    make
    sudo make install
    ```
    
7.  go to _/etc/_ and find the _ld.so.conf_ file. Append this line at the end of the file: _/usr/local/lib_
    
8.  from _/etc/_, call the command _sudo ldconfig_
    

Now, the needed libraries to run the project are installed.

## PhotoNext Emulator and PhotoNext Configurator

Our advice is that both the _PhotoNext Emulator_ and the _PhotoNext Configurator_ run on the same machine, since the _PhotoNext Configurator_ has the task of modifying the behavior of the _PhotoNext Emulator_ at the user's request. They must be cloned using the git clone command:

```
git clone git@github.com:CARDIGANSPoliTo/PhotoNext_Emulator.git
git clone git@github.com:CARDIGANSPoliTo/PhotoNext_Configurator.git
```

Then, go into each of the newly downloaded folders and create the executable files using the following commands:

```
mkdir build
cd build
cmake ..
make
```

They can be found in the build folder.

## PhotoNext Middleware

As the first step, it is necessary to install the MongoDB C and C++ Drivers. For other information, please refer to:

-   [http://mongoc.org/libmongoc/1.18.0/installing.html](http://mongoc.org/libmongoc/1.18.0/installing.html)
    
-   [http://mongocxx.org/mongocxx-v3/installation/linux/](http://mongocxx.org/mongocxx-v3/installation/linux/)
    
-   [Antonio Scaldaferri's Thesis](https://webthesis.biblio.polito.it/18183/).
    

Before installation, checking if a newer version of the MongoDB C and C++ drivers exists is recommended.

### Installing the MongoDB C Drivers

Follow these steps to install the MongoDB C Drivers, version 1.18.0:

```
wget https://github.com/mongodb/mongo-c-driver/releases/download/1.18.0/mongo-c-driver-1.18.0.tar.gz
tar xzf mongo-c-driver-1.18.0.tar.gz
cd mongo-c-driver-1.18.0
mkdir cmake-build
cd cmake-build
cmake -DENABLE_AUTOMATIC_INIT_AND_CLEANUP=OFF ..
cmake --build .
sudo cmake --build . --target install
```

Before installation, it is recommended to check if a newer version exists.

### Installing the MongoDB C++ Drivers

If a Raspberry Pi 3 or earlier is being used, it is necessary to increase the swap size to avoid CMake Out of Memory Exceptions. This can be done by following these steps:

```
sudo nano /etc/dphys-swapfile
change CONF_SWAPSIZE to 2048
```

It is recommended that the swap size (100 in the Raspberry Pi 3) be restored to the previous value after the operation to avoid a reduction in the life of the microSD card.

Follow these steps to install the MongoDB C++ Drivers, version 3.6.3:

```
curl -OL https://github.com/mongodb/mongo-cxx-driver/releases/download/r3.6.3/mongo-cxx-driver-r3.6.3.tar.gz
tar -xzf mongo-cxx-driver-r3.6.3.tar.gz
cd mongo-cxx-driver-r3.6.3/build
cmake .. -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=/usr/local
sudo cmake --build . --target EP_mnmlstc_core
cmake --build .
sudo cmake --build . --target install
```

### Downloading the Middleware

Download the _PhotoNext Middleware_ by cloning its repository:

```
git clone git@github.com:CARDIGANSPoliTo/PhotoNext_Middleware.git
```

### Building the Middleware

Before starting, open the _**include/SmartScanBlue/parser.hpp**_ and edit lines 107 and 109 with the MongoDB database information that must be created to run the project. Before each commit, returning to the default situation is necessary to avoid spreading sensitive information.

Then, build the _PhotoNext Middleware_ as before using the following commands:

```
mkdir build
cd build
cmake ..
make
```


## Module configuration

Many programs share the **EMU_LOCAL** variable: when it is set to 1, it means that the related program is running on the same machine where the other programs run; if the programs run on different machines, it must be set to 0.

### PhotoNext Configurator

The _PhotoNext Configurator_ configuration can be found in _smartscanconfig.h_ file. It is possible to notice the following directives:

-   **DEST_ADD**: is the IP of the _Interrogator_ or the _PhotoNext Emulator_. If it is in the same machine, the loopback address _127.0.0.1_ must be set;
    
-   **SRC_ADD**: is the IP of the current machine. The loopback address _127.0.0.1_ can be used.
    

### PhotoNext Emulator

The _PhotoNext Emulator_ configuration can be found in _smartscanemu.h_ file. It is possible to notice the following directives:

-   **LISTEN_IP_ADD**: must be always set to _0.0.0.0_;
    
-   **CLIENT_IP_ADD**: is the IP of the current machine, the one where the _PhotoNext Emulator_ runs. If it is wanted to simulate the real environment using the default configuration, the _PhotoNext Emulator_ must be on a different computer than the _client_ and this variable must be set to _10.0.0.150_. In other cases, the loopback address _127.0.0.1_ can also be used;
    
-   **SERVER_IP_ADD**: is the IP of the machine where the _PhotoNext Middleware_ runs. If it is wanted to simulate the real environment using the default configuration, the _PhotoNext Emulator_ must be on a different computer than the _client_, and this variable must be set to _10.0.0.2_. In other cases, the loopback address _127.0.0.1_ can also be used.
    

The _PhotoNext Emulator_ and the _PhotoNext Middleware_ listen and send the data to the same ports, _30011_ and _30012_. If they run on the same machine, these ports must be changed.


## Test of the different programs

The usual workflow to test everything up to the client would be to run at the same time:

-   the **PhotoNext Configurator**
    
-   the **PhotoNext Emulator**
    
-   the **PhotoNext Middleware**
    

A first test can be to see if the _PhotoNext Emulator _ sees the changes made in the _PhotoNext Configurator_. Once the _PhotoNext Configurator_ is open, it is possible to select, for example, the b option to send the default maintenance message: from this moment, the _PhotoNext Emulator_ will start to send it for an undefined time; it is possible to change the transmission speed by clicking the _c -> d -> desired speed (0 to stop) -> x_.

The _PhotoNext Middleware_ doesn't write anything on screen: all its messages are hijacked directly to the system logger (_syslog_), which can be found in the _/var/log/_ folder. Indeed, the idea is that it runs as a systemd service: it is possible to control the output using _journalctl_ and filter by service. If it is wanted to redirect the messages to stdout, set the _CONSOLE_LOG_ option to 1.

The command for displaying the output messages in _journalctl_ is the following: _journalctl -fxet client_ (change client with _PhotoNext Middleware_).

## Reproduce the real behavior

For recreating the system more realistically, it is better to execute the _PhotoNext Middleware_ and the _PhotoNext Emulator_ on different machines: so, it is needed to set, in the _PhotoNext Emulator_, the corresponding IPs and the _EMU_LOCAL_ variable to 0. If a VM is being used, it is needed to enable port forwarding; if Oracle VM VirtualBox is being used, it can be set using "Bridged Adapter". If there is a firewall on the PC, be sure to add some connection rules or, alternatively, turn it off.

A Raspberry Pi can be used for executing the _PhotoNext Middleware_: in the real situation, be sure to use the Ethernet connection to get the data from the _Interrogator_ and the wifi connection to transmit the data to the visualization software.

If the libraries have been installed correctly, the default configuration will be reported in the _smartscan_config.txt_ file, contained in the _/usr/local/etc/libsmartscan_ folder, and is as follows:

-   The _Interrogator_ uses _10.0.0.150_ as IP for the connection with the _Photonext Middleware_, which instead uses _10.0.0.2_;
    
-   The connection between the _Photonext Middleware_ and the _Viewers_ can use private class C IPs, like 192.168.0.X.


## _PhotoNext FBG Data Analyzer_

The PhotoNext FBG Data Analyzer requires Python to work. This operation can be done by [accessing the official Python website](https://www.python.org/downloads/). Please also add the Python path to the Environment Path ($PATH) of Windows and install numpy and pandas.

The rest of the section will describe all the features of the _PhotoNext FBG Data Analyzer_ and how it needs to be set up in order to work.

### Installing LIBMONGOC and LIBBSON

This guide is also at [http://mongoc.org/libmongoc/current/installing.html](http://mongoc.org/libmongoc/current/installing.html)

Open Windows PowerShell as administrator and run the following lines of code:

```
wget https://github.com/mongodb/mongo-c-driver/releases/download/1.23.3/mongo-c-driver-1.23.3.tar.gz
tar xzf mongo-c-driver-1.23.3.tar.gz
cd mongo-c-driver-1.23.3
mkdir cmake-build
cd cmake-build 
cmake -DENABLE_AUTOMATIC_INIT_AND_CLEANUP=OFF -DENABLE_EXTRA_ALIGNMENT=0 ..
cmake --build .
cmake --build . --target install
```

### Installing MONGOCXX and BSONCXX

This guide is also at [https://mongocxx.org/mongocxx-v3/installation/windows/](https://mongocxx.org/mongocxx-v3/installation/windows/ "https://mongocxx.org/mongocxx-v3/installation/windows/")

Open Windows PowerShell as administrator and run the following lines of code:

```
curl -OL https://github.com/mongodb/mongo-cxx-driver/releases/download/r3.7.1/mongo-cxx-driver-r3.7.1.tar.gz 
tar -xzf mongo-cxx-driver-r3.7.1.tar.gz
cd mongo-cxx-driver-r3.7.1/build
```

If curl is not installed, the file can be directly downloaded at the following link: [h](https://github.com/mongodb/mongo-cxx-driver/releases/download/r3.7.1/mongo-cxx-driver-r3.7.1 "https://github.com/mongodb/mongo-cxx-driver/releases/download/r3.7.1/mongo-cxx-driver-r3.7.1")[ttps://github.com/mongodb/mongo-cxx-driver/releases/download/r3.7.1/mongo-cxx-driver-r3.7.1.tar.gz](https://github.com/mongodb/mongo-cxx-driver/releases/download/r3.7.1/mongo-cxx-driver-r3.7.1.tar.gz "https://github.com/mongodb/mongo-cxx-driver/releases/download/r3.7.1/mongo-cxx-driver-r3.7.1.tar.gz")

Next, extract the contents of the .tar file and enter the build folder. Still using PowerShell, the build can be created and installed by running the following lines of code:

```
cmake .. -G "Visual Studio 17 2022" -DBOOST_ROOT="C:\Program Files (x86)\boost\boost_1_82_0" -DCMAKE_PREFIX_PATH="C:\Program Files (x86)\mongo-c-driver" -DCMAKE_INSTALL_PREFIX="C:\Program Files (x86)\mongo-cxx-driver" 
cmake --build .
cmake --build . --target install
```

Download Boost binaries from the site [https://sourceforge.net/projects/boost/files/boost-binaries/](https://sourceforge.net/projects/boost/files/boost-binaries/ "https://sourceforge.net/projects/boost/files/boost-binaries/") and install them.  
Now install the Qt suite. Note that the version of Qt used to build the program was initially 6.2.4. After that, open Qt Creator and select File -> Open Project or File. Then, open the program project by choosing the CMakeLists.txt file.

### Running the software with CMake

Make sure that the following lines are contained in the _CmakeLists.txt_ file:

```
find_package(mongoc-1.0 REQUIRED)
find_package(mongocxx REQUIRED)
target_link_libraries(PolitoSmartSoft PRIVATE mongo::mongocxx_shared)
target_link_libraries(PolitoSmartSoft PRIVATE mongo::mongoc_shared)
```

Once opened, right-click on the Project root and click "Run CMake" to execute it.

To run the program, the following modifications could be necessary (the program was not tested fully due to restricted time):

1.  **To avoid the C1189 error: "No Target Architecture"**, remove _#include <synchapi.h>_ from _sessionlogger.cpp_, _fftchart.cpp_ and _mongointerface.cpp_ and put only _#include <windows.h>_ in _mongointerface.cpp_.
    
2.  **To avoid the C2131 error: "expression did not evaluate to a constant"**, in file _fftchart.cpp_ change the line containing:
   
    ```
    qreal f[m_window];
    m_fftEngines[sensor]->do_fft(f, m_buffers[sensor].constData());
    ```
    with the following lines:
    ```
    std::vector<qreal> f(m_window); 
    m_fftEngines[sensor]->do_fft(&f[0], m_buffers[sensor].constData());
    ```

### Alternative: running the software with Qmake

This alternative method relies on Qmake to run the software. Create a new project and import all the source files of the software. Then, make sure that the .pro file looks similar to this one.

```
QT = core widgets charts 
TEMPLATE = app 
CONFIG += c++17 console 
CONFIG -= app_bundle 

# The code may fail to compile if it uses deprecated APIs. 
# In order to do so, uncomment the following line. 
#DEFINES += QT_DISABLE_DEPRECATED_BEFORE=0x060000 # disables all the APIs deprecated before Qt 6.0.0 
SOURCES += \
basechart.cpp \ 
chartlegend.cpp \ 
colorpicker.cpp \
crosshair.cpp \
custommenubar.cpp \ 
customstatusbar.cpp \ 
dbconnectiondialog.cpp \
fftchart.cpp \ 
fftoptionsdialog.cpp \
fftview.cpp \
loggerdialog.cpp \
main.cpp \ 
mainoptionsdialog.cpp \
mainwindow.cpp \ 
measuredialog.cpp \
measureoptionsdialog.cpp \ 
measuresview.cpp \ 
mockchart.cpp \ 
mongointerface.cpp \ 
peakchart.cpp \
peaktimeview.cpp \ 
sessionlogger.cpp \ 
sessionsettings.cpp \
tableview.cpp \ 
timechart.cpp 

# Default rules for deployment. 
qnx: target.path = /tmp/$${TARGET}/bin 
else: unix:!android: target.path = /opt/$${TARGET}/bin 
!isEmpty(target.path): INSTALLS += target

FORMS += \
mainwindow.ui 

DISTFILES += \
CMakeLists.txt \ 
FBG_Data_Analyzer.pro.user 

HEADERS += \
basechart.h \ 
chartlegend.h \ 
colorpicker.h \ 
crosshair.h \ 
custommenubar.h \ 
customstatusbar.h \ 
dbconnectiondialog.h \ 
fftchart.h \ 
fftoptionsdialog.h \
fftview.h \
json.hpp \ 
loggerdialog.h \
mainoptionsdialog.h \ 
mainwindow.h \ 
measuredialog.h \
measureoptionsdialog.h \
measuresview.h \ 
mockchart.h \
mongointerface.h \
peakchart.h \ 
peaktimeview.h \
sessionlogger.h \ 
sessionsettings.h \ 
tableview.h \
timechart.h 

#put boost path here 
INCLUDEPATH += "C:/Program Files (x86)/boost/boost_1_82_0" 
DEPENDPATH += "C:/Program Files (x86)/boost/boost_1_82_0" 

#put mongocxx path here 
win32: LIBS += "C:/Program Files (x86)/mongo-cxx-driver/lib/mongocxx.lib" 
INCLUDEPATH += "C:/Program Files (x86)/mongo-cxx-driver/include/mongocxx/v_noabi" 
DEPENDPATH += "C:/Program Files (x86)/mongo-cxx-driver/include/mongocxx/v_noabi" 

#put bsoncxx path here 
win32: LIBS += "C:/Program Files (x86)/mongo-cxx-driver/lib/bsoncxx.lib" 
INCLUDEPATH += "C:/Program Files (x86)/mongo-cxx-driver/include/bsoncxx/v_noabi"

DEPENDPATH += "C:/Program Files (x86)/mongo-cxx-driver/include/bsoncxx/v_noabi"
```

It can be seen that, at the end of the code, the paths for boost, mongocxx, and bsoncxx were inserted. Run Qmake and then build the program. Then, in the build folder, add the following .dll files: mongoc-1.0.dll, bson-1.0.dll, mongocxx.dll, and bsoncxx.dll.


### Commands

The main screen of the software is divided into different sections:

-   **Import panel**: this section allows selecting the 3D model of the physical system from a list of predefined models, or searching for one on the current file system. The visualization software accepts only .obj files. If the 3D model contains elements that represent the sensors and they are labeled as _sensorchannelNumber_sensorNumber_, the software will also extract them. After selecting the model, it can be rotated and scaled to define its idle position. If the model, once loaded, does not have the upper part facing upwards, this operation must be performed manually by the user;
    
-   **Network settings**: this section allows selecting two options: _TCP_ or _MongoDB_. In both cases, the IP address and the port must be entered: if the syntax is wrong, an error message will appear under the input forms. If _MongoDB_ is used, the name of the database and collection must be entered;
    
-   **Custom color palette**: this section allows selecting the heatmap palette from the default list or creating a new one by clicking the _+_ button. If such an operation is performed, a color wheel with nine different squares will be displayed: the color of the selected square, which will have a black outline, can be changed by clicking the desired color of the color wheel, while the hue can be changed using the cursor below. To change the selection of the squares, select another square by clicking on it with the left mouse button;
    
-   **Measure type**: this section allows selecting the measurement to perform. If it has been chosen to perform a temperature measurement, the sensor will be displayed as a sphere, otherwise, the sensor will be displayed as a box;
    
-   **Sensors configuration**: this section allows configuring the sensors position and value. By clicking on the _Get configuration from server/database_ button, the software will receive the current number of active sensors and their base value. The sensors position on the model may not be the correct one: by clicking on the _Change sensor position on the model_, it is possible to modify it. If the left mouse button is clicked on a sensor, it will follow the mouse cursor on the model surface. The sensor will be anchored in its current position by making a new click with the left mouse button. In the case of strain measurement, it is also possible to change the rotation of the sensor by selecting it with the right mouse button. The _ESC_ button makes it possible to return to the main menu. Finally, the sensor data panel allows manual entry or updating of the data.
    
## PhotoNext 3D Viewer

Before starting the application, it is essential that the default configuration, which has been discussed before, has been replicated. Then, follow these steps:

1. open the _PhotoNext 3D Viewer_ and insert, in the network configuration menu, the IP address of the _Photonext Middleware_ and _40000_ as port value. The current IP of the _PhotoNext 3D Viewer_ and the other port values are set automatically by the Unity application;
    
2. select and configure the 3D model;
    
3. request the sensor configuration by clicking the _Get configuration from the server/database_ button;
    
4. if necessary, move the sensors to the correct positions;
    
5. if all the previous configurations are established, a _Start Monitoring_ button will appear. By clicking on it, the monitoring phase will start and the _viewer_ will continuously receive the data from the _Photonext Middleware_;
    
6. when desired, click the _ESC_ button to return to the main menu.
    
In the event of an error, the application will display an appropriate message that will vary based on the type of error that has occurred.
